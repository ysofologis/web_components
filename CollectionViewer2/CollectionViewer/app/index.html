<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
<head>
    <title>Testing a dynamic collection viewer</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="js/modernizr.js"></script>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="css/collectionviewer.css">

</head>
<body>

    <div class="container full-height" id="main">
        <div id="main-layout" class="row full-height">
        </div>
        <div id="footer">

        </div>
    </div>

    <!-- == templates == -->
    <!-- == main layout == -->
    <script id="main-layout-template" type="text/x-kendo-layout">
        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8  full-height">
            <button onclick="loadCollection()">Load Collection</button>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4  full-height">
            <div id="collection-view-container" class="full-height"></div>
        </div>
    </script>

    <script type="text/x-kendo-layout" id="item-template">
        <div class="panel panel-default">
            <div class="panel-heading">
                <span data-bind="text: header"></span>
            </div>
            <div class="panel-body item-text" style="overflow:auto;">
                <div data-bind="text: text">

                </div>
            </div>
        </div>
    </script>

    <!-- == dependencies == -->
    <script src="js/underscore.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/spin.js"></script>
    <!-- <script src="js/knockout.js"></script> -->
    <script src="js/kendo.all.min.js"></script>

    <script src="js/collectionviewer.js"></script>

    <script type="text/javascript">

        var _collectionViewer = new relational.widgets.collectionviewer.createCollectionViewer("#main", "#collection-view-container");
        var _dataSource = null;

        function createItem(header, text, lines) {
            var item = { header: header, text: "" };
            for (var ix = 0; ix < lines; ix++) {
                item.text += ix + ": " + text + "\n";
            }
            return item;
        }

        window.loadCollection = function() {
            _collectionViewer.load("#collection-view-container", _dataSource, "item-template");
            _collectionViewer.show();
        }

        $(document).ready(function () {


            var collectionItems = [
                createItem('01. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
                createItem('02. asfsdfadf', 'sdfasdfasdf sdfasdfasdf\n 456547547thjyuiyuifghg δφγυηρυτρτ ', 1),
                createItem('03. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 15),
                createItem('04. asfsdfadf', 'sdfasdfasdf sdfasdfasdf ', 1),
                createItem('05. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3),
                createItem('06. asfsdfadf', 'sdfasdfasdf sdfasdfasdf ', 1),
                createItem('07. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
                createItem('08. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 5),
                createItem('09. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3),
                createItem('10. asfsdfadf', 'sdfasdfasdf sdfasdfasdf ', 1),
                createItem('11. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
                createItem('12. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 5),
                createItem('13. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3),
                createItem('14. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
                createItem('15. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3)
            ];

            _dataSource = new kendo.data.DataSource({
                data: collectionItems,
            });
            var appDefaults = relational.widgets.collectionviewer.defaults;

            // immutable !!
            appDefaults.zero_opacity = 100;

            var mainLayout = new kendo.Layout("main-layout-template", { model: null, wrap: false });
            $("#main-layout").html(mainLayout.render());
        });

    </script>

</body>

</html>
