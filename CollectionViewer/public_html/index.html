<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Testing a dynamic collection viewer</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="js/modernizr.js"></script>

        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="css/app.css">

    </head>
    <body>

        <div class="container-fluid" id="main">
            <div class="row">
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                    <button data-bind="click: increaseBodySize">Increase body height by 10%</button>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" id="view-container" data-bind="style : { height: actualHeight }">
                    <div class="collection-view">
                        <ul class="list-unstyled list-container" data-bind="template: { name: 'itemContainerTemplate', foreach: renderer.visibleItems }">

                        </ul>
                        <div class="paging">
                            <div style="font-size:0.9em; margin-bottom: 5px;">
                                <span>
                                    Page: [<b data-bind="text: renderer.pageIndex"></b>]
                                </span>
                                <span class="divider"></span>
                                <span>
                                    Items: [<b data-bind="text: itemsCount"></b>]
                                </span>
                                <span class="divider"></span>
                                <span>
                                    From: [<b data-bind="text: fromVisible"></b>]
                                </span>
                                <span class="divider"></span>
                                <span>
                                    To: [<b data-bind="text: toVisible"></b>]
                                </span>
                            </div>
                            <div class="row" style="margin-right: 10px;">
                                <div class="col-md-8"></div>
                                <div class="col-md-2" style="text-align: right">
                                    <button class="btn btn-link"
                                            data-bind="click: showPrev, enable: hasPrev">
                                        Previous
                                    </button>
                                </div>
                                <div class="col-md-2" style="text-align: right">
                                    <button class="btn btn-link"
                                            data-bind="click: showNext, enable: hasNext">
                                        Next
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="footer">

            </div>
        </div>

        <!-- == templates == -->
        <script type="text/html" id="itemContainerTemplate">
        <li>
            <div class="item-container" data-bind="template: {name: 'itemTemplate'}, attr: {id: itemId}, style: { height: desiredHeight }">
            </div>
        </li>
    </script>

    <script type="text/html" id="itemTemplate">
        <div class="panel panel-default">
            <div class="panel-heading">
                <span data-bind="text: model.header"></span>
                <span class="divider"></span>
                <span>Desired:</span>
                <span data-bind="text: desiredHeight"></span>
                <span class="divider"></span>
                <span>Actual:</span>
                <span data-bind="text: actualHeight"></span>
            </div>
            <div class="panel-body" data-bind="text: model.text">

            </div>
        </div>
    </script>

    <!-- == dependencies == -->
    <script src="js/underscore.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/knockout.js"></script>
    <script src="models/collectionview.js"></script>

    <script type="text/javascript">

        function createItem(header, text, lines) {
            var item = {header: header, text: ""};

            for (var ix = 0; ix < lines; ix++) {
                item.text += text + "\n";
            }

            return item;
        }

        var collectionItems = [
            createItem('01. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
            createItem('02. asfsdfadf', 'sdfasdfasdf sdfasdfasdf\n 456547547thjyuiyuifghg δφγυηρυτρτ ', 1),
            createItem('03. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 5),
            createItem('04. asfsdfadf', 'sdfasdfasdf sdfasdfasdf ', 1),
            createItem('05. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3),
            createItem('06. asfsdfadf', 'sdfasdfasdf sdfasdfasdf ', 1),
            createItem('07. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
            createItem('08. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 5),
            createItem('09. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3),
            createItem('10. asfsdfadf', 'sdfasdfasdf sdfasdfasdf ', 1),
            createItem('11. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
            createItem('12. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 5),
            createItem('13. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3),
            createItem('14. asfsdfadf', 'sdfasdfasdf sdfasdfasdf', 2),
            createItem('15. asfsdfadf', 'sdfasdfasdf sdfasdfasdf 456456456 ghdfhgdfg sasdfasf vbmnXCdfg 678k', 3)
        ];
            
        var appDefaults = mylib.utils.collections.Defaults;
        
        appDefaults.zero_opacity = 100;
        
        var collectionViewer = new mylib.utils.collections.CollectionViewer("#main",
                                                "#view-container .collection-view .list-container",
                                                collectionItems,
                                                "my-collection");

        ko.applyBindings(collectionViewer);

        collectionViewer.show();
        
    </script>

</body>
</html>
